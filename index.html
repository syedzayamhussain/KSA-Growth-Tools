<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KSA ProCalc | Labor, Musaned & Nitaqat Suite</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <script src="https://pl28704609.effectivegatecpm.com/8c/7d/fd/8c7dfdd028216fccbe2f5e2256c497cd.js"></script>

    <style>
        body { 
            background-color: #020617; 
            font-family: 'Plus Jakarta Sans', sans-serif;
            background-image: radial-gradient(circle at top right, #1e293b, #020617);
            background-attachment: fixed;
        }
        .glass-panel { 
            background: rgba(15, 23, 42, 0.8); 
            backdrop-filter: blur(16px); 
            border: 1px solid rgba(255, 255, 255, 0.05); 
        }
        .nav-active { 
            background: #3b82f6; 
            color: white; 
            box-shadow: 0 0 20px rgba(59, 130, 246, 0.4);
        }
        input::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 24px;
            height: 24px;
            background: #3b82f6;
            border-radius: 50%;
            cursor: pointer;
            border: 4px solid #020617;
        }
    </style>
</head>
<body class="text-slate-200 min-h-screen">

    <header class="w-full py-6 px-4 border-b border-white/5 bg-slate-950/50 sticky top-0 z-50 backdrop-blur-md">
        <div class="max-w-7xl mx-auto flex flex-col md:flex-row justify-between items-center gap-4">
            <div class="flex items-center gap-3">
                <div class="w-10 h-10 bg-blue-600 rounded-xl flex items-center justify-center font-extrabold text-white">KP</div>
                <div>
                    <h1 class="text-xl font-800 tracking-tight text-white uppercase">KSA <span class="text-blue-500">ProCalc</span></h1>
                    <p class="text-[10px] font-bold text-slate-500 uppercase tracking-widest">Enterprise Labor Suite</p>
                </div>
            </div>
            
            <nav class="flex bg-slate-900/80 p-1 rounded-2xl border border-white/5 w-full md:w-auto">
                <button onclick="switchTool('esb')" id="btn-esb" class="nav-active flex-1 md:flex-none px-6 py-2 rounded-xl text-xs font-bold transition-all">ESB Payout</button>
                <button onclick="switchTool('musaned')" id="btn-musaned" class="flex-1 md:flex-none px-6 py-2 rounded-xl text-xs font-bold text-slate-400 transition-all">Musaned</button>
                <button onclick="switchTool('nitaqat')" id="btn-nitaqat" class="flex-1 md:flex-none px-6 py-2 rounded-xl text-xs font-bold text-slate-400 transition-all">Nitaqat</button>
            </nav>
        </div>
    </header>

    <main class="max-w-7xl mx-auto py-8 px-4 md:py-16">
        
        <div class="grid lg:grid-cols-12 gap-8 items-start">
            
            <div class="hidden lg:block lg:col-span-4 space-y-6">
                <div class="glass-panel p-8 rounded-[2rem]">
                    <h3 class="text-blue-400 font-bold text-sm uppercase tracking-widest mb-4">Official Standards</h3>
                    <p class="text-slate-400 text-sm leading-relaxed mb-6">
                        Designed for HR professionals and expatriates in Saudi Arabia. Our logic is updated for <strong>2026 ZATCA and MHRSD</strong> labor laws.
                    </p>
                    <ul class="space-y-4 text-xs font-semibold text-slate-300">
                        <li class="flex items-center gap-2">âœ… Article 84/85 Compliance</li>
                        <li class="flex items-center gap-2">âœ… 2025 Musaned Price Caps</li>
                        <li class="flex items-center gap-2">âœ… Nitaqat Small Entity Rules</li>
                    </ul>
                </div>
            </div>

            <div class="lg:col-span-8 w-full">
                
                <section id="tool-esb" class="glass-panel p-6 md:p-12 rounded-[2.5rem] shadow-2xl transition-all">
                    <div class="mb-10 text-center md:text-left">
                        <h2 class="text-3xl font-800 text-white mb-2">End of Service Predictor</h2>
                        <p class="text-slate-500 text-sm">Calculate your legal gratuity based on Saudi Labor Law.</p>
                    </div>

                    <div class="grid md:grid-cols-2 gap-8">
                        <div class="space-y-8">
                            <div>
                                <label class="block text-[10px] font-black uppercase tracking-[0.2em] text-blue-500 mb-3">Basic Monthly Salary (SAR)</label>
                                <input type="number" id="esbSalary" placeholder="e.g. 10000" class="w-full bg-slate-950 border border-white/10 rounded-2xl p-5 text-2xl font-bold text-white outline-none focus:border-blue-500" oninput="calcESB()">
                            </div>
                            <div>
                                <div class="flex justify-between items-center mb-4">
                                    <label class="text-[10px] font-black uppercase tracking-[0.2em] text-blue-500">Service Period</label>
                                    <span id="yearsDisplay" class="bg-blue-600/20 text-blue-400 px-3 py-1 rounded-lg font-bold text-sm">1 Year</span>
                                </div>
                                <input type="range" id="esbYears" min="1" max="30" value="1" step="0.5" class="w-full h-2 bg-slate-800 rounded-lg appearance-none cursor-pointer" oninput="calcESB()">
                            </div>
                            <div class="flex gap-4">
                                <button onclick="setEsbReason('resignation')" id="btn-resigns" class="flex-1 py-4 bg-blue-600 rounded-2xl font-800 text-xs uppercase tracking-widest text-white shadow-lg shadow-blue-500/20 transition-all">I Resigned</button>
                                <button onclick="setEsbReason('termination')" id="btn-term" class="flex-1 py-4 bg-slate-800 rounded-2xl font-800 text-xs uppercase tracking-widest text-slate-400 hover:bg-slate-700 transition-all">Terminated</button>
                            </div>
                        </div>

                        <div class="bg-slate-950 rounded-[2rem] p-8 flex flex-col justify-center items-center border border-white/5 text-center">
                            <p class="text-[10px] font-black uppercase text-slate-500 tracking-[0.3em] mb-4">Final Estimated Settlement</p>
                            <div id="esbResult" class="text-5xl md:text-6xl font-black text-white tracking-tighter mb-2">0.00</div>
                            <p class="text-blue-500 font-bold">Saudi Riyals</p>
                        </div>
                    </div>
                </section>

                <section id="tool-musaned" class="glass-panel p-6 md:p-12 rounded-[2.5rem] shadow-2xl hidden transition-all">
                    <div class="mb-10">
                        <h2 class="text-3xl font-800 text-white mb-2 text-center md:text-left">Domestic Recruitment Budget</h2>
                        <p class="text-slate-500 text-sm text-center md:text-left">Based on Musaned 2025 Price Ceilings.</p>
                    </div>
                    <div class="space-y-8 max-w-xl mx-auto">
                        <select id="musanedNat" class="w-full bg-slate-950 border border-white/10 rounded-2xl p-5 text-xl font-bold text-white outline-none appearance-none cursor-pointer" onchange="calcMusaned()">
                            <option value="14700">ðŸ‡µðŸ‡­ Philippines (~14,700 SAR)</option>
                            <option value="13800">ðŸ‡±ðŸ‡° Sri Lanka (~13,800 SAR)</option>
                            <option value="11750">ðŸ‡§ðŸ‡© Bangladesh (~11,750 SAR)</option>
                            <option value="9000">ðŸ‡°ðŸ‡ª Kenya (~9,000 SAR)</option>
                        </select>
                        <div class="bg-emerald-600/10 border border-emerald-500/20 rounded-2xl p-8 text-center">
                            <p class="text-xs font-bold text-emerald-500 uppercase tracking-widest mb-2">Total Estimated Year 1 Cost</p>
                            <p id="musanedTotal" class="text-5xl font-black text-white">0 SAR</p>
                        </div>
                    </div>
                </section>

                <section id="tool-nitaqat" class="glass-panel p-6 md:p-12 rounded-[2.5rem] shadow-2xl hidden transition-all">
                    <div class="mb-10 text-center md:text-left">
                        <h2 class="text-3xl font-800 text-white mb-2">Saudization Safety Check</h2>
                        <p class="text-slate-500 text-sm">Monitor your Nitaqat status for small and medium entities.</p>
                    </div>
                    <div class="grid md:grid-cols-2 gap-6">
                        <div class="space-y-4">
                            <input type="number" id="nitTotal" placeholder="Total Staff" class="w-full bg-slate-950 border border-white/10 rounded-2xl p-5 text-xl font-bold text-white outline-none" oninput="calcNitaqat()">
                            <input type="number" id="nitSaudi" placeholder="Saudi Staff" class="w-full bg-slate-950 border border-white/10 rounded-2xl p-5 text-xl font-bold text-white outline-none" oninput="calcNitaqat()">
                        </div>
                        <div id="nitCard" class="bg-slate-950 rounded-2xl p-8 flex flex-col justify-center items-center text-center border border-white/5">
                            <p id="nitStatus" class="text-xl font-black uppercase mb-2">Awaiting Data</p>
                            <p id="nitAdvice" class="text-xs text-slate-500 leading-relaxed font-semibold">Enter your staff numbers to check your compliance color.</p>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </main>

    <footer class="max-w-7xl mx-auto px-4 py-12 border-t border-white/5 mt-12">
        <div class="flex flex-col md:flex-row justify-between items-center gap-8 mb-8">
            <div class="text-center md:text-left">
                <p class="text-xs font-black text-slate-500 uppercase tracking-[0.4em] mb-2">Developer</p>
                <p class="text-white font-bold text-sm">Zayam.H â€¢ KSA PRO TOOLS 2026</p>
            </div>
            <a href="https://wa.me/?text=Check%20out%20this%20KSA%20ProCalc%20Suite!%20Calculate%20ESB,%20Musaned,%20and%20Nitaqat%20in%20one%20place:%20https://ksa-growth-tools.vercel.app/" 
               class="px-8 py-4 bg-[#25D366] text-white rounded-2xl font-800 text-xs uppercase tracking-widest hover:scale-105 transition-all shadow-xl shadow-green-500/20">
               Share with WhatsApp Group
            </a>
        </div>
        
        <div class="bg-white/5 rounded-2xl p-6 text-center md:text-left border border-white/5">
            <p class="text-[10px] text-slate-500 font-bold uppercase tracking-widest mb-2">Legal Disclaimer</p>
            <p class="text-[10px] text-slate-600 leading-relaxed uppercase">
                The calculations provided by KSA ProCalc are for informational and estimation purposes only. While we follow the 2026 Saudi Labor Laws (Article 84 & 85) and Musaned price ceilings, actual amounts may vary based on specific contract terms, company policy, and final ZATCA audits. We strongly recommend consulting with an HR professional or the Ministry of Human Resources for final legal decisions.
            </p>
        </div>
    </footer>

    <script>
        // Copy your existing script logic here exactly as it was
        function switchTool(tool) {
            document.getElementById('tool-esb').classList.add('hidden');
            document.getElementById('tool-musaned').classList.add('hidden');
            document.getElementById('tool-nitaqat').classList.add('hidden');
            
            ['btn-esb', 'btn-musaned', 'btn-nitaqat'].forEach(id => {
                document.getElementById(id).className = 'flex-1 md:flex-none px-6 py-2 rounded-xl text-xs font-bold text-slate-400 transition-all';
            });

            document.getElementById('tool-' + tool).classList.remove('hidden');
            document.getElementById('btn-' + tool).className = 'nav-active flex-1 md:flex-none px-6 py-2 rounded-xl text-xs font-bold transition-all';
        }

        let esbReason = 'resignation'; 
        function setEsbReason(reason) {
            esbReason = reason;
            document.getElementById('btn-resigns').className = reason === 'resignation' 
                ? 'flex-1 py-4 bg-blue-600 rounded-2xl font-800 text-xs uppercase tracking-widest text-white shadow-lg' 
                : 'flex-1 py-4 bg-slate-800 rounded-2xl font-800 text-xs uppercase tracking-widest text-slate-400';
            
            document.getElementById('btn-term').className = reason === 'termination' 
                ? 'flex-1 py-4 bg-red-600 rounded-2xl font-800 text-xs uppercase tracking-widest text-white shadow-lg' 
                : 'flex-1 py-4 bg-slate-800 rounded-2xl font-800 text-xs uppercase tracking-widest text-slate-400';
            calcESB();
        }

        function calcESB() {
            const salary = parseFloat(document.getElementById('esbSalary').value) || 0;
            const years = parseFloat(document.getElementById('esbYears').value) || 1;
            document.getElementById('yearsDisplay').innerText = years + (years === 1 ? ' Year' : ' Years');
            let reward = 0;
            let firstFive = Math.min(years, 5) * (salary / 2);
            let afterFive = Math.max(0, years - 5) * salary;
            let totalBase = firstFive + afterFive;
            if (esbReason === 'resignation') {
                if (years < 2) reward = 0;
                else if (years >= 2 && years < 5) reward = totalBase / 3;
                else if (years >= 5 && years < 10) reward = (totalBase * 2) / 3;
                else reward = totalBase;
            } else { reward = totalBase; }
            document.getElementById('esbResult').innerText = reward.toLocaleString('en-US', {minimumFractionDigits: 2});
        }

        function calcMusaned() {
            const recruitmentCost = parseFloat(document.getElementById('musanedNat').value);
            const total = recruitmentCost + 2000 + 600 + 1000;
            document.getElementById('musanedTotal').innerText = total.toLocaleString() + " SAR";
        }

        function calcNitaqat() {
            const total = parseInt(document.getElementById('nitTotal').value) || 0;
            const saudi = parseInt(document.getElementById('nitSaudi').value) || 0;
            const card = document.getElementById('nitCard');
            const status = document.getElementById('nitStatus');
            const advice = document.getElementById('nitAdvice');

            if (total === 0) {
                status.innerText = "AWAITING DATA";
                card.className = "bg-slate-950 rounded-2xl p-8 flex flex-col justify-center items-center text-center border border-white/5";
                return;
            }

            if (total <= 9) {
                if (saudi >= 1) {
                    status.innerText = "âœ… GREEN"; status.style.color = "#10b981";
                    advice.innerText = "Under Small Entity rules (0-9 staff), having 1 Saudi employee keeps you compliant.";
                } else {
                    status.innerText = "âš ï¸ RED"; status.style.color = "#ef4444";
                    advice.innerText = "You need at least 1 Saudi employee to move into the Green zone for Small Entities.";
                }
            } else {
                const p = (saudi/total)*100;
                status.innerText = p >= 25 ? "âœ… SAFE" : "âš ï¸ AT RISK";
                status.style.color = p >= 25 ? "#10b981" : "#f59e0b";
                advice.innerText = `Your Saudization rate is ${p.toFixed(1)}%. Maintain 25%+ for most medium sectors.`;
            }
        }

        calcMusaned();
    </script>
</body>
</html>
